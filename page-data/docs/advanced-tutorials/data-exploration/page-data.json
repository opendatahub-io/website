{"componentChunkName":"component---src-templates-create-pages-js","path":"/docs/advanced-tutorials/data-exploration","result":{"data":{"markdownRemark":{"html":"<h2>Pre-requisites</h2>\n<p>This tutorial requires that you followed the <a href=\"%7B%7Bsite.baseurl%7D%7D/docs/getting-started/basic-tutorial\">basic tutorial</a>. Make sure you enabled the following components in Open Data Hub CR:</p>\n<ul>\n<li>spark-operator</li>\n<li>data-catalog</li>\n</ul>\n<p>All screenshots and instructions are from OpenShift 4.2.</p>\n<h2>Exploring Data Catalog</h2>\n<p>The Data Catalog is a set of components with which you can\nread data stored in Data Lakes, create tables and query them in a SQL-like style. You can find\nbelow a picture of the simplified architecture of Data Catalog:</p>\n<p><img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/architecture.png\" alt=\"Data Catalog Architecture\" title=\"Data Catalog Architecture\"></p>\n<p>These are the components that are part of Data Catalog:</p>\n<ul>\n<li>Hive Metastore, responsible for maintaining the table metadata created by the user to query the data stored in Ceph/S3</li>\n<li>Spark SQL Thrift server to enable an endpoint where clients can connect using an ODBC/JDBC connection</li>\n<li>Cloudera Hue as a Data Exploration tool to explore the Data Lake, create tables and query them. You can\nalso create dashboards using the tables managed by Hive Metastore</li>\n</ul>\n<h2>Using Data Catalog</h2>\n<ol>\n<li>Find the route to Hue. Within your Open Data Hub Project click on Networking -> Routes\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/routes.png\" alt=\"OpenShift routes\" title=\"OpenShift routes\"></li>\n<li>For the route named hue, click on the location to bring up Hue (typically <code>http://hue-project.apps.your-cluster.your-domain.com</code>).</li>\n<li>It will open the first-time login page where you can create the superuser for Hue.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/hue-user-creation.png\" alt=\"Hue user creation\" title=\"Hue user creation\"></li>\n<li>As the first login, Hue will show a tutorial about the interface. You can skip the tutorial by closing the window.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/tutorial.png\" alt=\"Hue tutorial\" title=\"Hue tutorial\"></li>\n<li>The Hue editor will appear in a blank textarea.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/editor.png\" alt=\"Hue editor\" title=\"Hue editor\"></li>\n</ol>\n<p>Now we can create a table from a file inside the Data Lake.</p>\n<h2>Creating and querying tables</h2>\n<ol>\n<li>\n<p>Let's create first a database with the following command (You can run the query by either clicking on the play button in the left or type Ctrl+Enter):</p>\n<pre><code>CREATE DATABASE opendatahub;\n</code></pre>\n</li>\n<li>In the explorer, click on the refresh button. The new database will appear:\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/new-database.png\" alt=\"New database created\" title=\"New database created\">{:class=\"img-auto\"}</li>\n<li>\n<p>Now let's select the database with the command:</p>\n<pre><code>USE opendatahub;\n</code></pre>\n</li>\n<li>\n<p>We will create a table from the <code>sample_data.csv</code> file used in the <code>Basic Tutorial</code> section:</p>\n<pre><code>CREATE EXTERNAL TABLE opendatahub.sample(\ntimestamp TIMESTAMP,\nname STRING,\nfield STRING,\nprimary_audience STRING,\nkey_people STRING,\noutcome STRING,\nfull_notes STRING,\nemail STRING,\nsample_date DATE,\nnotes STRING,\nlowlights STRING,\nlearnings STRING,\ntrip_region STRING,\nnumber_of_days INT,\nestimated_cost FLOAT,\nproduct_mix STRING\n)\nROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.OpenCSVSerde'\nWITH SERDEPROPERTIES (\n\"separatorChar\" = \",\",\n\"quoteChar\" = \"\\\"\",\n\"escapeChar\" = \"\\\\\" \n)\nTBLPROPERTIES(\"skip.header.line.count\"=\"1\")\nLOCATION 's3a://&#x3C;csv-file-location>'\n</code></pre>\n<p><strong>NOTE:</strong> The <code>LOCATION</code> statement needs a path to the directory where the file is stored, not the file path.</p>\n</li>\n<li>You will see the result of table creation.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/table-creation.png\" alt=\"New table created\" title=\"New table created\"></li>\n<li>\n<p>We can now query the data.</p>\n<pre><code>select * from opendatahub.sample limit 10;\n</code></pre>\n</li>\n<li>Check the query results in Hue.\n<img src=\"%7B%7Bsite.baseurl%7D%7D/assets/img/pages/docs/data-catalog/query-results.png\" alt=\"Query results\" title=\"Query results\"></li>\n</ol>\n<p>{% include next-link.html label=\"Kubeflow\" url=\"/docs/kubeflow.html\" %}</p>"}},"pageContext":{"permalink":"/docs/advanced-tutorials/data-exploration"}},"staticQueryHashes":["1804438722"]}